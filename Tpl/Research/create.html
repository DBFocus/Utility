<include file="./Tpl/Public/headstart.html" />
<title>设计视图</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.7.3/themes/ui-lightness/jquery-ui.css" />
<link rel="stylesheet" href="__PUBLIC__/css/common.css" />
<style>
	#content {
		width: 600px;
		background-color: lightyellow;
		margin-top: 10px;
		margin-bottom: 10px;
	}

	h1 {
		text-align: center;	
	}

	h2 {
		margin: 0 auto;
		width: 500px;
		margin-bottom: 20px;
		font-size: 15px;
		background-color: lightgreen;
		padding: 10px;
	}
	
	aside ul {
		list-style-type:none;
		float: left;
	}

	aside li {
		padding:3px;
		border: 1px dashed #000000;
		margin: 3px;
	}
	
	.input {
		border: 1px dashed gray;
	}
	
	table.mainframe {
		border-collapse: collapse;
		margin: 20px auto;
		width: 550px;
	}
	
	.mainframe tr {
		height: 30px;
	}
	
	.ctrl {
		width: 33px;
	}
	
	.del, .add {
		cursor: pointer;
	}
	
	.ui-widget, .ui-widget button {
		font-size: 0.9em;
	}
</style>
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="http://code.jquery.com/ui/1.7.3/jquery-ui.min.js"></script>
<script>
	$(function() {
		//attach delete and add buttons
		var lineCtrl = '<img src="__PUBLIC__/images/delete.png" title="删除行" class="del" /><img src="__PUBLIC__/images/add.png" title="插入行" class="add" />';
		$('.ctrl').html(lineCtrl);
		
		//click delete button
		$('.del').click(function(){			
			var hasContent = false;	
			var currTr = $(this).parents('tr');
			currTr.children('.input').each(function(){				
				if ($(this).html().length != 0) {
					hasContent = true;
				}
			});	
			
			$( "#delConfirm" ).dialog({
				autoOpen: false,
				resizable: false,
				modal: true,
				buttons: {
					"取消": function() {
						$(this).dialog("close");
					},
					"确定": function() {
						currTr.remove();
						$(this).dialog("close");
					}						
				}
			});
			
			if (hasContent) {			
				$( "#delConfirm" ).dialog('open');
			} else {
				currTr.remove();
			}			
		});
		
		//click add button
		$('.add').click(function() {
			var currTr = $(this).parents('tr');
			$('<tr><td class="input"></td><td class="input"></td><td class="ctrl">' + lineCtrl + '</td></tr>').insertAfter(currTr);
		});
		
		//click .input field
		$('.input').click(function() {
			$(this).addClass('poped');
			var currElement = $(this);
			var inputBox = $('#inputBox');
			var currAlignValue = currElement.css('text-align');
			if ($("#txtInputBox input[name='inputAlign'][value="+currAlignValue+"]").length == 0) {
				var alignRadio = $("#txtInputBox input[name='inputAlign'][value='left']");
			} else {
				var alignRadio = $("#txtInputBox input[name='inputAlign'][value="+currAlignValue+"]");
			}
			
			inputBox.val(currElement.text());
			alignRadio.attr('checked', 'checked');
			
			$( "#txtInputBox" ).dialog({
				autoOpen: false,
				resizable: false,
				modal: true,
				buttons: {
					"确定": function() {
						var currElement = $('.poped');
						alert(currElement.text());
						currElement.text(inputBox.val());
						currElement.css('text-align', $("#txtInputBox input[name='inputAlign']:checked").val());
						$( this ).dialog( "close" );
					},
					"取消": function() {
						$( this ).dialog( "close" );
					}
				},
				close: function() {
					var currElement = $('.poped');
					currElement.removeClass('poped');
				}
			});
			
			if (currElement.is('td')) {
				alert('this element is td');
			} else {
				$( "#txtInputBox" ).dialog('open');
			}
		});		
	});
</script>
<include file="./Tpl/Public/headend_bodystart_banner.html" />
<div id="delConfirm" style="display:none;" title="删除确认">
	<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>该行中填有内容，您确定要删除吗？</p>
</div>
<div id="txtInputBox" style="display:none;" title="输入文本">
	<form>
		<table style="text-align: left;">
			<tr>
				<th>内容输入</th>
			</tr>
			<tr>
				<td>
					<textarea id="inputBox" rows="2" cols="40" class="text ui-widget-content ui-corner-all"></textarea>
				</td>
			</tr>
			<tr>
				<th>水平对齐</th>
			</tr>
			<tr>
				<td>
					<input type="radio" name="inputAlign" value="left" class="radio ui-widget-content ui-corner-all" />居左
					<input type="radio" name="inputAlign" value="center" class="radio ui-widget-content ui-corner-all"/>居中
					<input type="radio" name="inputAlign" value="right" class="radio ui-widget-content ui-corner-all" />居右
				</td>
			</tr>
		</table>
	</form>
</div>
<aside>
	<ul>
		<li>
			输入框 <input type="text" size="4" />
		</li>
		<li>
			单选项 <input type="radio" />
		</li>
	</ul>
</aside>
<section id="content">
	<h1 class="input">主标题</h1>
	<h2 class="input">副标题或说明</h2>
	<table class="mainframe">
		<tr>
			<td class="input"></td>
			<td class="input">bbb</td>
			<td class="ctrl"></td>
		</tr>
		<tr>
			<td class="input"></td>
			<td class="input"></td>
			<td class="ctrl"></td>
		</tr>
		<tr>
			<td class="input"></td>
			<td class="input"></td>
			<td class="ctrl"></td>
		</tr>
		<tr>
			<td class="input"></td>
			<td class="input"></td>
			<td class="ctrl"></td>
		</tr>
		<tr>
			<td class="input"></td>
			<td class="input"></td>
			<td class="ctrl"></td>
		</tr>
		<tr>
			<td class="input"></td>
			<td class="input"></td>
			<td class="ctrl"></td>
		</tr>
	</table>
</section>
<include file="./Tpl/Public/footer_bodyend.html" />